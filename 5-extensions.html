<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
	<meta charset="utf-8"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>‚ú® 5 Extensions &mdash; OpenXR Tutorial  documentation</title>
	<link rel="stylesheet" href="_static/pygments.css" type="text/css">
	<link rel="stylesheet" href="_static/css/theme.css" type="text/css">
	<link rel="stylesheet" href="_static/copybutton.css" type="text/css">
	<link rel="shortcut icon" href="_static/favicon.ico">
	<!--[if lt IE 9]>
	  <script src="_static/js/html5shiv.min.js"></script>
	<![endif]-->
	
	<script src="_static/jquery.js"></script>
	<script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
	<script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
	<script src="_static/doctools.js"></script>
	<script src="_static/sphinx_highlight.js"></script>
	<script src="_static/clipboard.min.js"></script>
	<script src="_static/copybutton.js"></script>
	<script src="https://unpkg.com/mermaid@9.4.0/dist/mermaid.min.js"></script>
	<script>mermaid.initialize({startOnLoad:true});</script>
	<script src="_static/js/theme.js"></script>
	<link rel="index" title="Index" href="genindex.html" >
	<link rel="search" title="Search" href="search.html" >
	<link rel="prev" title="üïπ 4 Interactions" href="4-actions.html" > 
	<script  src="_static/js/js.cookie.min.js"></script>
	<script >
	function updatePlatform()
	{
	var platform = Cookies.get("platform");
	console.log("updatePlatform(), platform = " + platform);
	if (typeof platform == 'undefined')
	{
		platform = "windows"; // Set default here.
	}
	$(".linux").hide();
	$(".android").hide();
	$(".windows").hide();
	if (platform == "windows")
	{
		$(".windows").show();
		$(".selectd3d11").disabled = false;
		$(".selectd3d12").disabled = false;
		$(".selectopengles").disabled = true;
		$(".selectvulkan").disabled = false;
		$(".selectopengl").disabled = false;
	}
	if (platform == "linux")
	{
		$(".linux").show();
		$(".selectd3d11").disabled = true;
		$(".selectd3d12").disabled = true;
		$(".selectopengles").disabled = true;
		$(".selectvulkan").disabled = false;
		$(".selectopengl").disabled = false;
	}
	if (platform == "android")
	{
		$(".android").show();
		$(".selectd3d11").disabled = true;
		$(".selectd3d12").disabled = true;
		$(".selectopengles").disabled = false;
		$(".selectvulkan").disabled = false;
		$(".selectopengl").disabled = true;
	}
	var oldelements = document.querySelectorAll(".selected-platform");
	console.log("selected-platform on "+oldelements.length+" elements.");
	while (oldelements.length > 0)
	{
		var el=oldelements.item(0);
		el.classList.remove('selected-platform');
		console.log("Removing selected-platform from "+el.id);
		oldelements = document.querySelectorAll(".selected-platform");
	}
	var element = document.getElementById('select' + platform);
	if(element)
	{
		element.classList.add('selected-platform');
		console.log("Adding selected-platform to "+element.id);
	}
	var element2 = document.getElementById('select' + platform + "-inline");
	if(element2)
	{
		element2.classList.add('selected-platform');
		console.log("Adding selected-platform to "+element2.id);
	}
	else
	{
		console.log('select' + platform + "-inline not found");
	}
	if(limitAPIChoice())
		updateGraphicsAPI();
	window.updatePlatform=updatePlatform;
	}
	
	function limitAPIChoice()
	{
		var platform = Cookies.get("platform");
		var graphicsApi = Cookies.get("graphicsapi")
		console.log("limitAPIChoice(), platform = " + platform+", graphicsApi = "+graphicsApi);
		window.limitAPIChoice=limitAPIChoice;
		var newApi=graphicsApi;
		if (platform == "windows")
		{
			if (graphicsApi == "opengles"||graphicsApi==undefined)
				newApi="d3d11";
		}
		if (platform == "linux")
		{
			if (graphicsApi == "opengles"||graphicsApi=="d3d11"||graphicsApi=="d3d12"||graphicsApi==undefined)
				newApi="vulkan";
		}
		if (platform == "android"||graphicsApi==undefined)
		{
			if (graphicsApi != "opengles"&&graphicsApi!="vulkan")
				newApi="vulkan";
		}
		console.log("newApi = "+newApi);
		if (newApi != graphicsApi)
		{
			console.log("setting graphicsapi = "+newApi);
			Cookies.set('graphicsapi', newApi,{ expires: 365})
			graphicsApi=newApi;
			return true;
		}
		return false;
	}
	function makeLinksOpenInNewWindow()
	{ 
		console.log("makeLinksOpenInNewWindow ");
		var download_hrefs = document.getElementsByClassName('reference download internal');
		[].forEach.call(download_hrefs, function(el) {
			el.setAttribute('target', "_blank");
			console.log("Adding target blank to "+el.id);
		});
		link_hrefs = document.getElementsByClassName('reference external');
		[].forEach.call(link_hrefs, function(el) {
			el.setAttribute('target', "_blank");
			console.log("Adding target blank to "+el.id);
		});
		window.makeLinksOpenInNewWindow=makeLinksOpenInNewWindow;
	}
	function updateGraphicsAPI()
	{
		var graphicsApi = Cookies.get("graphicsapi")
		console.log("graphicsapi = " + graphicsApi);
		if (typeof graphicsApi == 'undefined')
		{
			graphicsApi = "vulkan"; // Set default here.
		}
		// first, hide all the api's
		$(".d3d11").hide();
		$(".d3d12").hide();
		$(".opengl").hide();
		$(".opengles").hide();
		$(".vulkan").hide();
		// Now, show the wanted api's. In this way, divs with more than one will be shown, even if they have one that is hidden.
		if (graphicsApi == "d3d11") {
			$(".d3d11").show();
		}
		if (graphicsApi == "d3d12") {
			$(".d3d12").show();
		}
		if (graphicsApi == "opengl") {
			$(".opengl").show();
		}
		if (graphicsApi == "opengles") {
			$(".opengles").show();
		}
		if (graphicsApi == "vulkan") {
			$(".vulkan").show();
		}
		var oldelements = document.querySelectorAll(".selected-graphics-api");
		console.log("selected-platform on "+oldelements.length+" elements.");
		while (oldelements.length > 0)
		{
			var el=oldelements.item(0);
			el.classList.remove('selected-graphics-api');
			console.log("Removing selected-graphics-api from "+el.id);
			oldelements = document.querySelectorAll(".selected-graphics-api");
		}
		var element = document.getElementById('select' + graphicsApi);
		if(element)
		{
			element.classList.add('selected-graphics-api');
		}
		var element2 = document.getElementById('select' + graphicsApi +"-inline");
		if (element2)
		{
			element2.classList.add('selected-graphics-api');
		}
		window.updateGraphicsAPI=updateGraphicsAPI;
	}</script>
	<script >
	var graphicsApi = Cookies.get("graphicsapi")
	if (graphicsApi==undefined) {
		Cookies.set('graphicsapi', 'vulkan',{ expires: 365})
		graphicsApi='vulkan';
	}
	</script>
	<style>
	@import url('https://fonts.googleapis.com/css2?family=Poppins&display=swap');
	@import url('https://fonts.cdnfonts.com/css/menlo');
	</style>
</head>

<body class="wy-body-for-nav" onload="updatePlatform(); updateGraphicsAPI(); makeLinksOpenInNewWindow();"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
			<a href="index.html"  class="" >
				<img src="_static/OpenXR_170px_Feb17.png" class="logo" alt="The OpenXR logo" >
				
				<span class="sidebartitle">
					Tutorial
				</span>
				
			</a>
<div role="search">
    <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
        <label class="search-label" for="q">Search the tutorial</label>
        <input type="text" name="q" id="q" placeholder="Search..." aria-label="Search docs">
        <input type="hidden" name="check_keywords" value="yes">
        <input type="hidden" name="area" value="default">
    </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="1-introduction.html">üëã 1 Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="2-setup.html">‚öôÔ∏è 2 Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="3-graphics.html">üëæ 3 Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="4-actions.html">üïπ 4 Interactions</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">‚ú® 5 Extensions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#hand-tracking">5.1 Hand Tracking</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

	<div data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
			<i data-toggle="wy-nav-top" class="fa fa-bars"></i>
			<a href="index.html">OpenXR Tutorial</a>
		</nav>

		<div class="sticky-breadcrumb-ribbon" role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">‚ú® 5 Extensions</li>
	  <li class="disclaimer">Disclaimer: Work in Progress. This site is in progress and is not ready for use.</li>
	  <li class="wy-breadcrumbs-aside">
		  <div id='selectplatform'>
	<button class="select-platform" id='selectwindows' onclick="choosePlatform('windows')">
		<img class="platform-tab-img" src="_static/css/windows-colour.svg" alt="Windows" />
	</button>
	<button class="select-platform" id='selectlinux' onclick="choosePlatform('linux')">
		<img class="platform-tab-img" src="https://upload.wikimedia.org/wikipedia/commons/3/35/Tux.svg" alt="Linux" />
	</button>
	<button class="select-platform" id='selectandroid' onclick="choosePlatform('android')">
		<img class="platform-tab-img" src="_static/css/android-colour.svg" alt="Android" />
	</button>
</div>
<script>
	function choosePlatform(platformName)
	{
		var platform = Cookies.get('platform')
		Cookies.set('platform', platformName, { expires: 365 })
		updatePlatform();
	};
</script>

<div id='selectgraphicsapi'>
	<button class="select-graphics-api selectd3d11" id='selectd3d11' onclick="chooseGraphicsAPI('d3d11')">
		<img class="api-tab-img" src="_static/css/directx11-logo.jpg" alt="DirectX 11" />
	</button>
	<button class="select-graphics-api selectd3d12" id='selectd3d12' onclick="chooseGraphicsAPI('d3d12')">
		<img class="api-tab-img" src="_static/css/directx12-logo.jpg" alt="DirectX 12" />
	</button>
	<button class="select-graphics-api selectopengl" id='selectopengl' onclick="chooseGraphicsAPI('opengl')">
		<img class="api-tab-img" src="_static/css/OpenGL_RGB_June16.svg" alt="OpenGL" />
	</button>
	<button class="select-graphics-api selectopengles" id='selectopengles' onclick="chooseGraphicsAPI('opengles')">
		<img class="api-tab-img" src="_static/css/OpenGL ES_RGB_Nov19.svg" alt="OpenGL ES" />
	</button>
	<button class="select-graphics-api selectvulkan" id='selectvulkan' onclick="chooseGraphicsAPI('vulkan')">
		<img class="api-tab-img" src="_static/css/Vulkan_RGB_Dec16.svg" alt="Vulkan" />
	</button>
</div>
<script>
	function chooseGraphicsAPI(graphicsApiName)
	{
		Cookies.set('graphicsapi', graphicsApiName, { expires: 365 })
		var graphicsApi = Cookies.get('graphicsapi')
		updateGraphicsAPI();
		limitAPIChoice();
	};
</script>
	  </li>
  </ul>
</div>
		<div class="wy-nav-content">
				<div class="rst-content">
					<div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
						<div itemprop="articleBody">
							
  <section id="extensions">
<h1>‚ú® 5 Extensions<a class="headerlink" href="#extensions" title="Permalink to this heading">¬∂</a></h1>
<p>OpenXR is designed to be an extensible API. As we‚Äôve seen above, the call to xrCreateInstance() can include one or more extension names, and we can query xrEnumerateInstanceExtensionProperties() in advance to find out which extensions are supported by the runtime. In this section, we‚Äôll see how extensions add to the core API and look at a specific case, the hand tracking extension.</p>
<section id="hand-tracking">
<h2>5.1 Hand Tracking<a class="headerlink" href="#hand-tracking" title="Permalink to this heading">¬∂</a></h2>
<p>Many XR devices now support hand-tracking. Instead of a motion-tracked controller, one or more cameras take images of the surrounding area. If your hands are visible to the cameras, algorithms in or accessible to the runtime try to calculate the positions of your hands and fingers. We‚Äôll now enable hand tracking in your project.</p>
<div class="android docutils container">
<p>We‚Äôll edit your app/src/main/AndroidManifest.xml to enable the hand tracking feature. Add these lines to the &lt;manifest&gt; block:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;uses-permission</span><span class="w"> </span><span class="na">android:name=</span><span class="s">&quot;com.oculus.permission.HAND_TRACKING&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;uses-feature</span><span class="w"> </span><span class="na">android:name=</span><span class="s">&quot;oculus.software.handtracking&quot;</span><span class="w"> </span><span class="na">android:required=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Add this line to the &lt;application&gt; block:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;meta-data</span><span class="w"> </span><span class="na">android:name=</span><span class="s">&quot;com.oculus.handtracking.frequency&quot;</span><span class="w"> </span><span class="na">android:value=</span><span class="s">&quot;HIGH&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
</div>
<p>We saw in <a class="reference internal" href="2-setup.html#instanceextensions"><span class="std std-ref">Chapter 2</span></a>  how to create a list of instance extensions before starting up the OpenXR instance. At the top of CreateInstance(), where we‚Äôre listing the extensions to request, we‚Äôll add the name of the one that enables hand tracking:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="w">         </span><span class="n">m_instanceExtensions</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">XR_EXT_DEBUG_UTILS_EXTENSION_NAME</span><span class="p">);</span>
<span class="w">         </span><span class="n">m_instanceExtensions</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">GetGraphicsAPIInstanceExtensionString</span><span class="p">(</span><span class="n">m_apiType</span><span class="p">));</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="w">         </span><span class="n">m_instanceExtensions</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">XR_EXT_HAND_TRACKING_EXTENSION_NAME</span><span class="p">);</span>
</pre></div>
</div>
<p>It happens that XR_EXT_HAND_TRACKING is an official extension, so its name and function prototypes are provided in openxr.h. This won‚Äôt be the case for every extension!</p>
<p>At the start of your main.cpp, underneath where you included ‚ÄúOpenXRDebugUtils.h‚Äù, add these declarations:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">PFN_xrCreateHandTrackerEXT</span><span class="w"> </span><span class="n">xrCreateHandTrackerEXT</span><span class="o">=</span><span class="k">nullptr</span><span class="p">;</span>
<span class="n">PFN_xrDestroyHandTrackerEXT</span><span class="w"> </span><span class="n">xrDestroyHandTrackerEXT</span><span class="o">=</span><span class="k">nullptr</span><span class="p">;</span>
<span class="n">PFN_xrLocateHandJointsEXT</span><span class="w"> </span><span class="n">xrLocateHandJointsEXT</span><span class="o">=</span><span class="k">nullptr</span><span class="p">;</span>
</pre></div>
</div>
<p>openxr.h has prototyped these functions for us, but we‚Äôll need to get the function pointers at runtime, so at the end of CreateInstance(), add this:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">OPENXR_CHECK</span><span class="p">(</span><span class="n">xrGetInstanceProcAddr</span><span class="p">(</span><span class="n">m_xrInstance</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;xrCreateHandTrackerEXT&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">PFN_xrVoidFunction</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">xrCreateHandTrackerEXT</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;Failed to get xrCreateHandTrackerEXT.&quot;</span><span class="p">);</span>
<span class="n">OPENXR_CHECK</span><span class="p">(</span><span class="n">xrGetInstanceProcAddr</span><span class="p">(</span><span class="n">m_xrInstance</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;xrDestroyHandTrackerEXT&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">PFN_xrVoidFunction</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">xrDestroyHandTrackerEXT</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;Failed to get xrDestroyHandTrackerEXT.&quot;</span><span class="p">);</span>
<span class="n">OPENXR_CHECK</span><span class="p">(</span><span class="n">xrGetInstanceProcAddr</span><span class="p">(</span><span class="n">m_xrInstance</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;xrLocateHandJointsEXT&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">PFN_xrVoidFunction</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">xrLocateHandJointsEXT</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;Failed to get xrLocateHandJointsEXT.&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>These calls require an XrInstance, so we must initialize these after XrCreateInstance() has successfully returned. If hand tracking is not supported (or not enabled), we‚Äôll get a warning, and these functions will be null. You can run your app now to check this.</p>
<p>At the end of your OpenXRTutorial application class, declare the following:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">XrSystemHandTrackingPropertiesEXT</span><span class="w"> </span><span class="n">handTrackingSystemProperties</span><span class="p">{</span><span class="n">XR_TYPE_SYSTEM_HAND_TRACKING_PROPERTIES_EXT</span><span class="p">};</span>
<span class="w">   </span><span class="k">struct</span><span class="w"> </span><span class="nc">Hand</span>
<span class="w">   </span><span class="p">{</span>
<span class="w">       </span><span class="n">XrHandJointLocationEXT</span><span class="w"> </span><span class="n">m_jointLocations</span><span class="p">[</span><span class="n">XR_HAND_JOINT_COUNT_EXT</span><span class="p">];</span><span class="w"> </span>
<span class="w">       </span><span class="n">XrHandTrackerEXT</span><span class="w">  </span><span class="n">m_handTracker</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
<span class="w">   </span><span class="p">};</span>
<span class="w">   </span><span class="n">Hand</span><span class="w"> </span><span class="n">m_hands</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
</pre></div>
</div>
<p><cite>Hand</cite> is a simple struct to encapsulate the XrHandTrackerEXT object for each hand, and the joint location structures that we‚Äôll update to track hand motion. Now, in Run(), after the call to AttachActionSet(), add:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="p">(</span><span class="n">handTrackingSystemProperties</span><span class="p">.</span><span class="n">supportsHandTracking</span><span class="p">)</span>
<span class="w">	</span><span class="n">CreateHandTrackers</span><span class="p">();</span>
</pre></div>
</div>
<p>Add this function after the definition of AttachActionSet(). For each of two hands, we‚Äôll call xrCreateHandTrackerEXT() and fill in the m_handTracker object.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="w">   </span><span class="kt">void</span><span class="w"> </span><span class="nf">CreateHandTrackers</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">2</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">		</span><span class="n">Hand</span><span class="w"> </span><span class="o">&amp;</span><span class="n">hand</span><span class="o">=</span><span class="n">m_hands</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
<span class="w">           </span><span class="n">XrHandTrackerCreateInfoEXT</span><span class="w"> </span><span class="n">xrHandTrackerCreateInfo</span><span class="o">=</span><span class="p">{</span><span class="n">XR_TYPE_HAND_TRACKER_CREATE_INFO_EXT</span><span class="p">};</span>
<span class="w">           </span><span class="n">xrHandTrackerCreateInfo</span><span class="p">.</span><span class="n">hand</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="o">==</span><span class="mi">0</span><span class="o">?</span><span class="n">XR_HAND_LEFT_EXT</span><span class="o">:</span><span class="n">XR_HAND_RIGHT_EXT</span><span class="p">;</span>
<span class="w">           </span><span class="n">xrHandTrackerCreateInfo</span><span class="p">.</span><span class="n">handJointSet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">XR_HAND_JOINT_SET_DEFAULT_EXT</span><span class="p">;</span>
<span class="w">           </span><span class="n">OPENXR_CHECK</span><span class="p">(</span><span class="w"> </span><span class="n">xrCreateHandTrackerEXT</span><span class="p">(</span><span class="n">m_session</span><span class="p">,</span><span class="o">&amp;</span><span class="n">xrHandTrackerCreateInfo</span><span class="p">,</span><span class="o">&amp;</span><span class="n">hand</span><span class="p">.</span><span class="n">m_handTracker</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;Failed to create Hand Tracker.&quot;</span><span class="p">);</span>
<span class="w">       </span><span class="p">}</span>
<span class="w">   </span><span class="p">}</span>
</pre></div>
</div>
<p>The XrHandTrackerEXT object is a session-lifetime object, so in DestroySession(), at the top of the function we‚Äôll add:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">2</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">	</span><span class="n">xrDestroyHandTrackerEXT</span><span class="p">(</span><span class="n">m_hands</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">m_handTracker</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Hands should be polled once per frame. At the end of PollActions(), we‚Äôll poll each hand. We‚Äôll assume to begin with that the user isn‚Äôt holding the controller, so we‚Äôll use the XR_HAND_JOINTS_MOTION_RANGE_UNOBSTRUCTED_EXT motion range.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="p">(</span><span class="n">handTrackingSystemProperties</span><span class="p">.</span><span class="n">supportsHandTracking</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">	</span><span class="n">XrActionStateBoolean</span><span class="w"> </span><span class="n">state</span><span class="p">{</span><span class="n">XR_TYPE_ACTION_STATE_BOOLEAN</span><span class="p">};</span>
<span class="w">	</span><span class="n">XrActionStateGetInfo</span><span class="w"> </span><span class="n">getInfo</span><span class="p">{</span><span class="n">XR_TYPE_ACTION_STATE_GET_INFO</span><span class="p">};</span>
<span class="w">	</span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">2</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">	</span><span class="p">{</span>
<span class="w">		</span><span class="kt">bool</span><span class="w"> </span><span class="n">Unobstructed</span><span class="o">=</span><span class="nb">true</span><span class="p">;</span>
<span class="w">		</span><span class="n">Hand</span><span class="w"> </span><span class="o">&amp;</span><span class="n">hand</span><span class="o">=</span><span class="n">m_hands</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
<span class="w">		</span><span class="n">XrHandJointsMotionRangeInfoEXT</span><span class="w"> </span><span class="n">motionRangeInfo</span><span class="p">{</span><span class="n">XR_TYPE_HAND_JOINTS_MOTION_RANGE_INFO_EXT</span><span class="p">};</span>
<span class="w">		</span><span class="n">motionRangeInfo</span><span class="p">.</span><span class="n">handJointsMotionRange</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Unobstructed</span>
<span class="w">													</span><span class="o">?</span><span class="w"> </span><span class="n">XR_HAND_JOINTS_MOTION_RANGE_UNOBSTRUCTED_EXT</span>
<span class="w">													</span><span class="o">:</span><span class="w"> </span><span class="n">XR_HAND_JOINTS_MOTION_RANGE_CONFORMING_TO_CONTROLLER_EXT</span><span class="p">;</span>
<span class="w">		</span><span class="n">XrHandJointsLocateInfoEXT</span><span class="w"> </span><span class="n">locateInfo</span><span class="p">{</span><span class="n">XR_TYPE_HAND_JOINTS_LOCATE_INFO_EXT</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">motionRangeInfo</span><span class="p">};</span>
<span class="w">		</span><span class="n">locateInfo</span><span class="p">.</span><span class="n">baseSpace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m_localOrStageSpace</span><span class="p">;</span>
<span class="w">		</span><span class="n">locateInfo</span><span class="p">.</span><span class="n">time</span><span class="w"> </span><span class="o">=</span><span class="n">predictedTime</span><span class="p">;</span>
<span class="w">      </span>
<span class="w">		</span><span class="n">XrHandJointLocationsEXT</span><span class="w"> </span><span class="n">locations</span><span class="p">{</span><span class="n">XR_TYPE_HAND_JOINT_LOCATIONS_EXT</span><span class="p">};</span>
<span class="w">		</span><span class="n">locations</span><span class="p">.</span><span class="n">jointCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">uint32_t</span><span class="p">)</span><span class="n">XR_HAND_JOINT_COUNT_EXT</span><span class="p">;</span>
<span class="w">		</span><span class="n">locations</span><span class="p">.</span><span class="n">jointLocations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hand</span><span class="p">.</span><span class="n">m_jointLocations</span><span class="p">;</span>
<span class="w">		</span><span class="n">OPENXR_CHECK</span><span class="p">(</span><span class="n">xrLocateHandJointsEXT</span><span class="p">(</span><span class="n">hand</span><span class="p">.</span><span class="n">m_handTracker</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">locateInfo</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">locations</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;Failed to locate hand joints.&quot;</span><span class="p">);</span>
<span class="w">	</span><span class="p">}</span>
<span class="p">}</span>
<span class="w">      </span>
</pre></div>
</div>
<p>Finally, we‚Äôll render the hands simply by drawing a cuboid at each of the 26 joints of each hand. Where <cite>numberOfCuboids</cite> is defined, add this to make sure we have enough space in the constant buffers:</p>
<p>Now in RenderLayer(), just before the call to <cite>m_graphicsAPI-&gt;EndRendering()</cite>, add this so we render both hands, with all their joints:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="p">(</span><span class="n">handTrackingSystemProperties</span><span class="p">.</span><span class="n">supportsHandTracking</span><span class="p">)</span>
<span class="w">	</span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">2</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">	</span><span class="p">{</span>
<span class="w">		</span><span class="k">auto</span><span class="w"> </span><span class="n">hand</span><span class="o">=</span><span class="n">m_hands</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
<span class="w">		</span><span class="n">XrVector3f</span><span class="w"> </span><span class="n">hand_colour</span><span class="o">=</span><span class="p">{</span><span class="mf">1.f</span><span class="p">,</span><span class="mf">1.f</span><span class="p">,</span><span class="mf">0.f</span><span class="p">};</span>
<span class="w">		</span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="n">XR_HAND_JOINT_COUNT_EXT</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
<span class="w">		</span><span class="p">{</span>
<span class="w">			</span><span class="n">XrVector3f</span><span class="w"> </span><span class="n">sc</span><span class="o">=</span><span class="p">{</span><span class="mf">1.5f</span><span class="p">,</span><span class="mf">1.5f</span><span class="p">,</span><span class="mf">2.5f</span><span class="p">};</span>
<span class="w">			</span><span class="n">sc</span><span class="o">=</span><span class="n">sc</span><span class="o">*</span><span class="n">hand</span><span class="p">.</span><span class="n">m_jointLocations</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">radius</span><span class="p">;</span>
<span class="w">			</span><span class="n">RenderCuboid</span><span class="p">(</span><span class="n">hand</span><span class="p">.</span><span class="n">m_jointLocations</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">pose</span><span class="p">,</span><span class="n">sc</span><span class="p">,</span><span class="n">hand_colour</span><span class="p">);</span>
<span class="w">		</span><span class="p">}</span>
<span class="w">	</span><span class="p">}</span>
</pre></div>
</div>
<p>Run the app: you‚Äôll now see both hands, rendered as blocks.</p>
</section>
</section>


						</div>
					</div>
					<footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="4-actions.html" class="btn btn-neutral float-left" title="üïπ 4 Interactions" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr>

  <div role="contentinfo">
    <p>&#169; Copyright &#34;OpenXR&#34; and the OpenXR logo are trademarks owned by The Khronos Group Inc. and are registered as a trademark in China, the European Union, Japan and the United Kingdom.</p>
  </div> 

</footer>
				</div>
			</div>
		</div>
	</div>
  <script></script> 

</body>
</html>